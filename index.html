<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes">
    <title>Lupo - Transparent. Independent. Retail-Focused.</title>
    <link rel="stylesheet" href="styles/variables.css">
    <link rel="stylesheet" href="styles/base.css">
    <link rel="stylesheet" href="styles/layout.css">
    <link rel="stylesheet" href="styles/breakpoints.css">
    <link rel="stylesheet" href="styles/utilities.css">
    <link rel="stylesheet" href="styles/touch.css">
    <link rel="stylesheet" href="style.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <!-- Modular JavaScript Services -->
    <script src="js/services/AuthService.js"></script>
    <script src="js/services/StockService.js"></script>
    <script src="js/services/PortfolioService.js"></script>
    <script src="js/utils/NotificationService.js"></script>
    <script src="js/components/TradeModal.js"></script>
    <script src="js/components/PasswordReset.js"></script>
    <script src="js/components/UserProfile.js"></script>
    <script src="js/components/PortfolioDashboard.js"></script>
    <script src="js/services/RealTimeService.js"></script>
    <script src="js/components/RealTimePrices.js"></script>
    <script src="js/components/TechnicalChart.js"></script>
</head>
<body>
    <!-- Main App (Hidden by default) -->
    <div id="main-app" class="hidden">
        <!-- Professional Header -->
        <header class="main-header">
            <div class="container">
                <div class="header-content">
                    <div class="brand-section">
                        <h1 class="brand-title">
                            <span class="brand-primary">Lupo</span><span class="brand-secondary">.uno</span>
                        </h1>
                        <p class="brand-tagline">Transparent. Independent. Retail-Focused.</p>
                    </div>
                    <div class="header-actions">
                        <div class="theme-toggle">
                            <input type="checkbox" id="main-theme-toggle" class="theme-toggle-checkbox">
                            <label for="main-theme-toggle" class="theme-toggle-label">
                                <span class="theme-toggle-slider">
                                    <span class="theme-icon sun-icon"></span>
                                    <span class="theme-icon moon-icon"></span>
                                </span>
                            </label>
                        </div>
                        <div class="header-stats">
                            <div class="stat-item">
                                <span class="stat-label">Members</span>
                                <span class="stat-value" id="community-members">45,289</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-label">AMS Time</span>
                                <span id="amsterdam-time" class="stat-value">--:--:--</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-label">Data</span>
                                <span class="stat-value live-indicator">LIVE</span>
                            </div>
                        </div>
                        <button class="user-menu-btn" id="user-menu-btn">
                            <span class="user-icon"></span>
                            <span class="user-name">Account</span>
                            <span class="chevron-icon"></span>
                        </button>
                    </div>
                </div>
            </div>
        </header>

    <!-- Market Intelligence Dashboard -->
    <section class="intelligence-dashboard">
        <div class="container">
            <h2 class="section-title">Market Intelligence</h2>
            <div class="intelligence-grid">
                <div class="intelligence-card retail-sentiment">
                    <div class="card-header">
                        <h3>Retail Sentiment</h3>
                        <span class="sentiment-badge positive">Bullish</span>
                    </div>
                    <div class="sentiment-meter">
                        <div class="meter-bar">
                            <div class="meter-fill retail-fill" style="width: 68%"></div>
                        </div>
                        <span class="sentiment-score">68% Optimistic</span>
                    </div>
                    <div class="intelligence-stats">
                        <div class="stat">
                            <span class="stat-number">45,289</span>
                            <span class="stat-text">Active Members</span>
                        </div>
                        <div class="stat">
                            <span class="stat-number">1,247</span>
                            <span class="stat-text">Discussions</span>
                        </div>
                    </div>
                </div>

                <div class="intelligence-card institutional-sentiment">
                    <div class="card-header">
                        <h3>Institutional Sentiment</h3>
                        <span class="sentiment-badge neutral">Cautious</span>
                    </div>
                    <div class="sentiment-meter">
                        <div class="meter-bar">
                            <div class="meter-fill institutional-fill" style="width: 42%"></div>
                        </div>
                        <span class="sentiment-score">42% Conservative</span>
                    </div>
                    <div class="intelligence-stats">
                        <div class="stat">
                            <span class="stat-number">23</span>
                            <span class="stat-text">Opportunities</span>
                        </div>
                        <div class="stat">
                            <span class="stat-number">156</span>
                            <span class="stat-text">Alerts Active</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Navigation -->
    <nav class="main-nav">
        <div class="container">
            <div class="nav-wrapper">
                <div class="nav-tabs">
                    <button class="nav-tab active" data-tab="retail-opportunities">
                        <span class="nav-icon opportunities-icon"></span>
                        <span class="nav-label">Opportunities</span>
                    </button>
                    <button class="nav-tab" data-tab="my-watchlist">
                        <span class="nav-icon watchlist-icon"></span>
                        <span class="nav-label">Watchlist</span>
                    </button>
                    <button class="nav-tab" data-tab="my-portfolio">
                        <span class="nav-icon portfolio-icon"></span>
                        <span class="nav-label">Portfolio</span>
                    </button>
                    <button class="nav-tab" data-tab="institutional-transparency">
                        <span class="nav-icon transparency-icon"></span>
                        <span class="nav-label">Transparency</span>
                    </button>
                    <button class="nav-tab" data-tab="market-alerts">
                        <span class="nav-icon alerts-icon"></span>
                        <span class="nav-label">Alerts</span>
                    </button>
                    <button class="nav-tab" data-tab="community-insights">
                        <span class="nav-icon community-icon"></span>
                        <span class="nav-label">Community</span>
                    </button>
                    <button class="nav-tab" data-tab="education-hub">
                        <span class="nav-icon education-icon"></span>
                        <span class="nav-label">Learn</span>
                    </button>
                </div>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="main-content">
        <div class="container">
            
            <!-- Retail Opportunities Tab -->
            <section id="retail-opportunities" class="content-tab active">
                <div class="tab-header">
                    <h2 class="tab-title">Small Investor Opportunities</h2>
                    <button id="refresh-data" class="btn btn-secondary">
                        <span class="refresh-icon"></span>
                        <span class="btn-text">Refresh Data</span>
                    </button>
                </div>
                
                <div class="opportunities-grid">
                    <div class="opportunity-category">
                        <h3 class="category-title">Value Opportunities Under $1</h3>
                        <div class="stocks-grid" id="under-1-stocks">
                            <!-- Under $1 stocks will be rendered here -->
                        </div>
                    </div>
                    
                    <div class="opportunity-category">
                        <h3 class="category-title">Growth Stocks Under $4</h3>
                        <div class="stocks-grid" id="under-4-stocks">
                            <!-- Under $4 stocks will be rendered here -->
                        </div>
                    </div>

                    <div class="opportunity-category">
                        <h3 class="category-title">High-Potential Under $5</h3>
                        <div class="stocks-grid" id="under-5-stocks">
                            <!-- Under $5 stocks will be rendered here -->
                        </div>
                    </div>
                </div>
            </section>

            <!-- My Watchlist Tab -->
            <section id="my-watchlist" class="content-tab">
                <h2 class="tab-title">My Personal Watchlist</h2>
                
                <!-- Stock Search -->
                <div class="watchlist-search" style="background: var(--color-professional-surface); border-radius: var(--radius-lg); padding: var(--space-24); margin-bottom: var(--space-24); border: 1px solid rgba(245, 158, 11, 0.2);">
                    <h3 style="margin-bottom: var(--space-16); color: var(--color-professional-text);">Add Stock to Watchlist</h3>
                    <div class="watchlist-form" style="display: flex; gap: var(--space-12); align-items: center;">
                        <input 
                            type="text" 
                            id="stock-search" 
                            placeholder="Enter stock symbol (e.g., AAPL, TSLA, NOK)" 
                            class="form-control" 
                            style="flex: 1; background: var(--color-professional-dark); border: 1px solid rgba(245, 158, 11, 0.3); color: var(--color-professional-text);"
                        >
                        <button id="add-to-watchlist" class="btn btn-primary">
                            📊 Add Stock
                        </button>
                    </div>
                    <div id="search-suggestions" class="search-suggestions" style="margin-top: var(--space-12);"></div>
                </div>

                <!-- Watchlist Grid -->
                <div class="watchlist-container">
                    <div id="watchlist-stocks" class="stocks-grid">
                        <!-- User's watchlist stocks will be rendered here -->
                    </div>
                    <div id="empty-watchlist" class="empty-state" style="text-align: center; padding: var(--space-32); color: var(--color-professional-text-secondary);">
                        <div style="font-size: 48px; margin-bottom: var(--space-16);">📊</div>
                        <h3 style="margin-bottom: var(--space-8);">Your Watchlist is Empty</h3>
                        <p>Add stocks you want to track by searching above. Start with popular symbols like AAPL, TSLA, or NOK.</p>
                    </div>
                </div>
            </section>

            <!-- My Portfolio Tab -->
            <section id="my-portfolio" class="content-tab">
                <h2 class="tab-title">My Trading Portfolio</h2>
                
                <!-- Portfolio Summary -->
                <div class="portfolio-summary" style="background: var(--color-professional-surface); border-radius: var(--radius-lg); padding: var(--space-24); margin-bottom: var(--space-24); border: 1px solid rgba(245, 158, 11, 0.2);">
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: var(--space-20);">
                        <div class="portfolio-stat">
                            <div class="stat-label" style="font-size: var(--font-size-sm); color: var(--color-professional-text-secondary); margin-bottom: var(--space-4);">Portfolio Value</div>
                            <div id="portfolio-value" class="stat-value" style="font-size: var(--font-size-3xl); font-weight: var(--font-weight-bold); color: var(--color-professional-primary); font-family: var(--font-family-mono);">$10,000.00</div>
                        </div>
                        <div class="portfolio-stat">
                            <div class="stat-label" style="font-size: var(--font-size-sm); color: var(--color-professional-text-secondary); margin-bottom: var(--space-4);">Available Cash</div>
                            <div id="available-cash" class="stat-value" style="font-size: var(--font-size-3xl); font-weight: var(--font-weight-bold); color: var(--color-retail-positive); font-family: var(--font-family-mono);">$10,000.00</div>
                        </div>
                        <div class="portfolio-stat">
                            <div class="stat-label" style="font-size: var(--font-size-sm); color: var(--color-professional-text-secondary); margin-bottom: var(--space-4);">Total P&L</div>
                            <div id="total-pnl" class="stat-value" style="font-size: var(--font-size-3xl); font-weight: var(--font-weight-bold); color: var(--color-professional-text-secondary); font-family: var(--font-family-mono);">$0.00</div>
                        </div>
                        <div class="portfolio-stat">
                            <div class="stat-label" style="font-size: var(--font-size-sm); color: var(--color-professional-text-secondary); margin-bottom: var(--space-4);">Positions</div>
                            <div id="total-positions" class="stat-value" style="font-size: var(--font-size-3xl); font-weight: var(--font-weight-bold); color: var(--color-professional-text); font-family: var(--font-family-mono);">0</div>
                        </div>
                    </div>
                </div>

                <!-- Holdings Section -->
                <div class="portfolio-holdings">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: var(--space-20);">
                        <h3 style="margin: 0; color: var(--color-professional-text);">My Holdings</h3>
                        <button id="reset-portfolio" class="btn btn-outline" style="padding: 8px 16px; font-size: var(--font-size-sm);">
                        🔄 Reset Portfolio
                        </button>
                    </div>
                    
                    <div id="portfolio-holdings" class="stocks-grid">
                        <!-- User's holdings will be rendered here -->
                    </div>
                    
                    <div id="empty-portfolio" class="empty-state" style="text-align: center; padding: var(--space-32); color: var(--color-professional-text-secondary);">
                        <div style="font-size: 48px; margin-bottom: var(--space-16);">💼</div>
                        <h3 style="margin-bottom: var(--space-8);">No Holdings Yet</h3>
                        <p>Start trading by buying stocks from your watchlist or the opportunities above. You have $10,000 in simulated cash to practice with!</p>
                    </div>
                </div>

                <!-- Transaction History -->
                <div class="transaction-history" style="margin-top: var(--space-32);">
                    <h3 style="margin-bottom: var(--space-20); color: var(--color-professional-text);">Recent Transactions</h3>
                    <div id="transaction-list" style="background: var(--color-professional-surface); border-radius: var(--radius-lg); border: 1px solid rgba(245, 158, 11, 0.1);">
                        <div id="empty-transactions" style="padding: var(--space-24); text-align: center; color: var(--color-professional-text-secondary);">
                            <div style="font-size: 24px; margin-bottom: var(--space-8);">📈</div>
                            <p>No transactions yet. Start trading to see your history here.</p>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Institutional Transparency Tab -->
            <section id="institutional-transparency" class="content-tab">
                <h2 class="tab-title">Institutional Transparency</h2>
                <div class="transparency-grid">
                    <div class="institution-card">
                        <div class="institution-header">
                            <h3>BlackRock Holdings</h3>
                            <span class="market-influence high">High Market Influence</span>
                        </div>
                        <div class="holdings-list" id="blackrock-holdings">
                            <!-- BlackRock holdings will be rendered here -->
                        </div>
                    </div>
                    
                    <div class="institution-card">
                        <div class="institution-header">
                            <h3>Vanguard Holdings</h3>
                            <span class="market-influence high">High Market Influence</span>
                        </div>
                        <div class="holdings-list" id="vanguard-holdings">
                            <!-- Vanguard holdings will be rendered here -->
                        </div>
                    </div>

                    <div class="institution-card">
                        <div class="institution-header">
                            <h3>Berkshire Hathaway</h3>
                            <span class="market-influence medium">Strategic Positions</span>
                        </div>
                        <div class="holdings-list" id="berkshire-holdings">
                            <!-- Berkshire holdings will be rendered here -->
                        </div>
                    </div>
                </div>
            </section>

            <!-- Market Alerts Tab -->
            <section id="market-alerts" class="content-tab">
                <h2 class="tab-title">Fair Market Alerts</h2>
                <div class="alerts-container" id="market-alerts-list">
                    <!-- Market alerts will be rendered here -->
                </div>
            </section>

            <!-- Community Insights Tab -->
            <section id="community-insights" class="content-tab">
                <h2 class="tab-title">Community Insights</h2>
                <div class="insights-container" id="community-insights-list">
                    <!-- Community insights will be rendered here -->
                </div>
            </section>

            <!-- Education Hub Tab -->
            <section id="education-hub" class="content-tab">
                <h2 class="tab-title">Investor Education Hub</h2>
                <div class="education-grid">
                    <div class="education-card">
                        <h3>Market Structure Explained</h3>
                        <p>Understanding how institutional trading affects retail investors and market dynamics.</p>
                        <button class="btn btn-outline">Learn More</button>
                    </div>
                    <div class="education-card">
                        <h3>Investment Strategies for Small Investors</h3>
                        <p>Proven strategies for building wealth with limited capital and competing with institutions.</p>
                        <button class="btn btn-outline">Learn More</button>
                    </div>
                    <div class="education-card">
                        <h3>Risk Management Essentials</h3>
                        <p>Tools and techniques to protect your investments and manage risk effectively.</p>
                        <button class="btn btn-outline">Learn More</button>
                    </div>
                    <div class="education-card">
                        <h3>Understanding Dark Pools</h3>
                        <p>How institutional dark pool trading works and its impact on price discovery.</p>
                        <button class="btn btn-outline">Learn More</button>
                    </div>
                </div>
            </section>
        </div>
    </main>

    <!-- Stock Analysis Modal -->
    <div id="stock-modal" class="modal hidden">
        <div class="modal-overlay"></div>
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="modal-title">Investment Analysis</h2>
                <button id="close-modal" class="modal-close">
                    <span class="close-icon"></span>
                </button>
            </div>
            <div class="modal-body">
                <div class="modal-tabs">
                    <button class="modal-tab active" data-modal-tab="investment-analysis">Investment Analysis</button>
                    <button class="modal-tab" data-modal-tab="market-structure">Market Structure</button>
                    <button class="modal-tab" data-modal-tab="community-sentiment">Community Sentiment</button>
                </div>
                
                <div class="modal-content-area">
                    <div id="investment-analysis" class="modal-tab-content active">
                        <div id="analysis-metrics" class="analysis-metrics">
                            <!-- Investment analysis will be rendered here -->
                        </div>
                        <div class="chart-container" style="position: relative; height: 300px;">
                            <canvas id="analysis-chart"></canvas>
                        </div>
                    </div>
                    
                    <div id="market-structure" class="modal-tab-content">
                        <div id="structure-info">
                            <!-- Market structure will be rendered here -->
                        </div>
                    </div>
                    
                    <div id="community-sentiment" class="modal-tab-content">
                        <div id="sentiment-analysis">
                            <!-- Community sentiment will be rendered here -->
                        </div>
                    </div>
                </div>
                
                <div class="modal-actions">
                    <button class="btn btn-primary" id="buy-stock">
                        <span class="buy-icon"></span>
                        <span class="btn-text">Buy Shares</span>
                    </button>
                    <button class="btn btn-secondary" id="sell-stock">
                        <span class="sell-icon"></span>
                        <span class="btn-text">Sell Shares</span>
                    </button>
                    <button class="btn btn-ghost" id="add-to-watchlist-modal">
                        <span class="watchlist-icon"></span>
                        <span class="btn-text">Add to Watchlist</span>
                    </button>
                    <button class="btn btn-ghost" id="set-alert-modal">
                        <span class="alerts-icon"></span>
                        <span class="btn-text">Set Alert</span>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Notification Toast -->
    <div id="notification-toast" class="notification-toast hidden">
        <div class="toast-content">
            <span class="toast-icon">📊</span>
            <div class="toast-text">
                <div class="toast-title">Market Update</div>
                <div class="toast-message">New opportunity identified!</div>
            </div>
        </div>
    </div>
    </div> <!-- End of main-app -->

    <!-- Login Landing Page -->
    <div id="login-page" class="login-container">
        <div class="login-background"></div>
        <div class="login-content">
            <div class="login-card">
                <div class="login-header">
                    <div class="theme-toggle">
                        <input type="checkbox" id="theme-toggle" class="theme-toggle-checkbox">
                        <label for="theme-toggle" class="theme-toggle-label">
                            <span class="theme-toggle-slider">
                                <span class="theme-icon sun-icon"></span>
                                <span class="theme-icon moon-icon"></span>
                            </span>
                        </label>
                    </div>
                    <h1 class="login-brand">
                        <span style="color: #f59e0b;">Lupo</span><span style="color: #fbbf24;">.uno</span>
                    </h1>
                    <p class="login-tagline">Transparent. Independent. Retail-Focused.</p>
                    <p class="login-subtitle">Empowering retail investors through market transparency and education</p>
                </div>

                <div class="login-form">
                    <div class="form-group">
                        <label for="login-email" class="form-label">Email Address</label>
                        <input type="email" id="login-email" class="form-control" placeholder="Enter your email">
                    </div>
                    
                    <div class="form-group">
                        <label for="login-password" class="form-label">Password</label>
                        <input type="password" id="login-password" class="form-control" placeholder="Enter your password">
                    </div>

                    <div class="form-options">
                        <div class="remember-me">
                            <input type="checkbox" id="remember-me" class="form-checkbox">
                            <label for="remember-me" class="checkbox-label">Remember me</label>
                        </div>
                        <a href="#" id="forgot-password" class="forgot-password">Forgot password?</a>
                    </div>

                    <button id="login-button" class="btn btn-primary login-btn">
                        <span class="btn-text"><span class="btn-icon"></span>Enter Trading Platform</span>
                        <span class="btn-loading hidden"><span class="loading-spinner"></span>Signing in...</span>
                    </button>

                    <div class="auth-switch">
                        <p>Don't have an account? <a href="#" id="show-register">Create Account</a></p>
                    </div>

                </div>
            </div>
        </div>
    </div>


    <script src="js/app.js"></script>
</body>
</html>